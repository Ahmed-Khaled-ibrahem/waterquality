import cv2

print("🎥 Camera Test Starting...")

# Try a few indexes (0 to 3) to find the working camera
for i in range(4):
    print(f"\n🔍 Trying camera index {i}...")
    cap = cv2.VideoCapture(i, cv2.CAP_DSHOW)  # CAP_DSHOW is for Windows. Remove if you're on Linux/Mac

    if not cap.isOpened():
        print(f"❌ Camera index {i} could not be opened.")
        continue

    ret, frame = cap.read()
    if not ret:
        print(f"⚠️ Camera index {i} opened but failed to capture image.")
        cap.release()
        continue

    print(f"✅ Camera index {i} is working!")
    print(f"📏 Frame dimensions: {frame.shape[1]} x {frame.shape[0]}")
    
    # Show the frame
    cv2.imshow(f"Camera {i} Preview (Press 'q' to quit)", frame)

    # Wait for key press
    key = cv2.waitKey(0)
    if key == ord('q'):
        cap.release()
        cv2.destroyAllWindows()
        break

    cap.release()
    cv2.destroyAllWindows()

print("\n🔁 Camera test finished.")
